webpackJsonp([24],{300:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),s=r.n(o),i=r(2);e.default={name:"permission",data:function(){var t=this;return{permissondata:[],permissoncolums:[{type:"selection",width:60,align:"center"},{title:"申请编号",key:"work_id"},{title:"申请人",key:"username"},{title:"状态",key:"status",width:150,render:function(t,e){var r=e.row,o="",s="";return 2===r.status?(o="blue",s="待审核"):0===r.status?(o="red",s="驳回"):1===r.status?(o="green",s="已执行"):(o="yellow",s="执行中"),t("Tag",{props:{type:"dot",color:o}},s)},sortable:!0,filters:[{label:"已执行",value:1},{label:"驳回",value:0},{label:"待审核",value:2},{label:"执行中",value:3}],filterMethod:function(t,e){return 1===t?1===e.status:2===t?2===e.status:0===t?0===e.status:3===t?3===e.status:void 0}},{title:"操作",key:"action",width:200,align:"center",render:function(e,r){return e("div",[e("Button",{props:{size:"small",type:"text"},on:{click:function(){t.modalinfo(r.row)}}},"查看")])}}],per_pn:1,delrecord:[],editInfodModal:!1,permission:{},user:"",work_id:""}},methods:{permisson_list:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;s.a.get(i.a.url+"/audit_grained?page="+e).then(function(e){t.permissondata=e.data.data,t.per_pn=e.data.pn}).catch(function(e){i.a.ajanxerrorcode(t,e)})},delrecordData:function(){var t=this;s.a.put(i.a.url+"/audit_grained/",{work_id:JSON.stringify(this.delrecord)}).then(function(e){t.$Notice.info({title:"通知",desc:e.data}),t.permisson_list()}).catch(function(e){i.a.ajanxerrorcode(t,e)})},delrecordList:function(t){this.delrecord=t.map(function(t){return t.work_id})},modalinfo:function(t){this.editInfodModal=!0,this.permission=t.permissions,this.user=t.username,this.work_id=t.work_id},savedata:function(){var t=this;s.a.post(i.a.url+"/audit_grained/",{status:0,user:this.user,work_id:this.work_id,grained_list:JSON.stringify(this.permission)}).then(function(e){t.$Notice.info({title:"通知",desc:e.data}),t.editInfodModal=!1,t.permisson_list()}).catch(function(e){i.a.ajanxerrorcode(t,e)})},reject:function(){var t=this;s.a.post(i.a.url+"/audit_grained/",{status:1,user:this.user,work_id:this.work_id}).then(function(e){t.$Notice.info({title:"通知",desc:e.data}),t.editInfodModal=!1,t.permisson_list()}).catch(function(e){i.a.ajanxerrorcode(t,e)})}},mounted:function(){this.permisson_list()}}},355:function(t,e,r){e=t.exports=r(79)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Permissions.vue",sourceRoot:""}])},635:function(t,e,r){var o=r(355);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r(80)("7325686c",o,!0,{})},675:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"person"}}),t._v("\n        权限审核\n      ")],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"24"}},[r("Poptip",{attrs:{confirm:"",title:"您确认删除这些工单信息吗?"},on:{"on-ok":t.delrecordData}},[r("Button",{staticStyle:{"margin-left":"-1%"},attrs:{type:"text"}},[t._v("删除记录")])],1),t._v(" "),r("Table",{ref:"selection",attrs:{border:"",columns:t.permissoncolums,data:t.permissondata,stripe:""},on:{"on-selection-change":t.delrecordList}}),t._v(" "),r("br"),t._v(" "),r("Page",{ref:"perpage",attrs:{total:t.per_pn,"show-elevator":"","page-size":20},on:{"on-change":t.permisson_list}})],1)],1)],1)],1),t._v(" "),r("Modal",{attrs:{width:800},model:{value:t.editInfodModal,callback:function(e){t.editInfodModal=e},expression:"editInfodModal"}},[r("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("权限申请单")]),t._v(" "),r("Form",{attrs:{"label-width":120,"label-position":"right"}},[[r("FormItem",{attrs:{label:"DDL及索引权限:"}},["0"===t.permission.ddl?r("p",[t._v("否")]):r("p",[t._v("是")])]),t._v(" "),"0"!==t.permission.ddl?[r("FormItem",{attrs:{label:"连接名:"}},t._l(t.permission.ddlcon,function(e){return r("span",{staticStyle:{"margin-left":"1%"}},[t._v(t._s(e))])}))]:t._e(),t._v(" "),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),t._v(" "),r("br"),t._v(" "),r("FormItem",{attrs:{label:"DML权限:"}},["0"===t.permission.dml?r("p",[t._v("否")]):r("p",[t._v("是")])]),t._v(" "),"1"===t.permission.dml?[r("FormItem",{attrs:{label:"连接名:"}},t._l(t.permission.dmlcon,function(e){return r("span",{staticStyle:{"margin-left":"1%"}},[t._v(t._s(e))])}))]:t._e(),t._v(" "),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),t._v(" "),r("br"),t._v(" "),r("FormItem",{attrs:{label:"上级审核人范围:"}},t._l(t.permission.person,function(e){return r("span",{staticStyle:{"margin-left":"1%"}},[t._v(t._s(e))])})),t._v(" "),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),t._v(" "),r("br"),t._v(" "),r("FormItem",{attrs:{label:"数据字典权限:"}},["0"===t.permission.dic?r("p",[t._v("否")]):r("p",[t._v("是")])]),t._v(" "),"1"===t.permission.dic?[r("FormItem",{attrs:{label:"数据字典修改权限:"}},["0"===t.permission.dicedit?r("p",[t._v("否")]):r("p",[t._v("是")])]),t._v(" "),r("FormItem",{attrs:{label:"数据字典导出权限:"}},["0"===t.permission.dicexport?r("p",[t._v("否")]):r("p",[t._v("是")])]),t._v(" "),r("FormItem",{attrs:{label:"连接名:"}},t._l(t.permission.diccon,function(e){return r("span",{staticStyle:{"margin-left":"1%"}},[t._v(t._s(e))])}))]:t._e()],t._v(" "),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),t._v(" "),r("br"),t._v(" "),r("FormItem",{attrs:{label:"用户管理权限:"}},["0"===t.permission.user?r("p",[t._v("否")]):r("p",[t._v("是")])]),t._v(" "),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),t._v(" "),r("br"),t._v(" "),r("FormItem",{attrs:{label:"数据库管理权限:"}},["0"===t.permission.base?r("p",[t._v("否")]):r("p",[t._v("是")])])],2),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.editInfodModal=!1}}},[t._v("取消")]),t._v(" "),r("Button",{attrs:{type:"error"},on:{click:t.reject}},[t._v("驳回")]),t._v(" "),r("Button",{attrs:{type:"success"},on:{click:t.savedata}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]}},84:function(t,e,r){function o(t){r(635)}var s=r(1)(r(300),r(675),o,"data-v-e2c00e48",null);t.exports=s.exports}});
//# sourceMappingURL=24.ad42ef962c2a2ac55e86.js.map